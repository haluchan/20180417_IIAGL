<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1,user-scalable=no">
    <!-- 在手機裡全螢幕 -->
    <script type="text/javascript">
        GEvent('進站');
    </script>
    <link rel="stylesheet" href="css/reset-css.css">
    <link rel="stylesheet" href="css/layout.css"/>
    <script type="text/javascript" src="lib/jquery-3.3.1.min.js"></script>
    <script async src="https://www.youtube.com/iframe_api"></script>
<!--    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-115294384-16'"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-115294384-16'); </script>-->

    <title>厄夢娃娃屋</title>
</head>

<body>

    <div class="container">


        <section class="page1">
            <div class="top"></div>
            <div><img class="help" src="./img/help.png" alt="厄夢娃娃屋"></div>
            <div class="finger"></div>
            <div><img class="finger-1 brightness" src="img/finger-1.png" alt="厄夢娃娃屋"></div>

            <div><img class="p1-title" src="./img/p1-title.png" alt="厄夢娃娃屋"></div>
            <div class="bottom"></div>
        </section>
        <div style="background-color: black">
            <section class="page2">
                <audio src="./audio/Audio.mp3" id='audio'></audio>
                <div class="screw"></div>
            </section>

            <section class="page3">
                <div class="top"></div>
                <div class="video-container"><iframe width="560" height="315" src="https://www.youtube.com/embed/h4uTPLHoitk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>
                <div class="space">
                    <div class="back">
                        <div class="face"><img src="./img/p3-02.png" alt="厄夢娃娃屋"></div>
                        <div></div>
                    </div>
                    <div class="front">
                        <div><img src="./img/p3-03.png" alt="厄夢娃娃屋"></div>
                        <div id="share">
                            <img src="" alt="厄夢娃娃屋">
                        </div>
                    </div>
                </div>
                <div class="p3-title"><img src="./img/p3-title.png" alt="厄夢娃娃屋"></div>
                <div class="bottom"></div>
            </section>
        </div>
    </div>

<!--    <script type="text/javascript" src="./js/commd.js"></script>-->
    <script>
    $(document).ready(function(){
        let page = 1 ,
          page1 = $('.page1'),
          page2 = $('.page2'),
          page3  = $('.page3');



        $('.finger-1').on('click', page ,function (){
            // GEvent('指紋按壓');
            FirstPage().then(delay().then(sec()));

        });

        function FirstPage(){

            return new Promise(function (resolve, reject){

                $('.finger-1').css('visibility',"hidden");
                $('.finger').append('<img class="finger-2" src="./img/finger-2.png" alt="厄夢娃娃屋">');
                resolve(true);
            })
        }

        function delay(){

            return new Promise(function(resolve, reject){
                setTimeout(function () {
                    let audio = $('#audio');
                    page1.fadeOut(10);
                    page2.fadeIn();
                    $('.screw').append('<img src="./img/trans.png" alt="厄夢娃娃屋">');
                    setTimeout(function () {
                        audio[0].play();
                    },100);
                }, 300);
                resolve(true);
            })
        }

        function sec(){

            setTimeout(function(){
                page2.fadeOut(200);
                $('.screw').empty();
                page3.fadeIn(100);
            },2200);

            state();
        }

        function state(){

            // let maxNum = 3;
            // let minNum = 1;
            // let stateN = Math.floor(Math.random() * (maxNum - minNum + 1)) + minNum;

            let stateN = 1 ;

            let shareImg =$('#share img');

            switch(stateN) {
                case 1:
                    shareImg.attr('src','../img/BTN_01.png');
                    break;
              // case 2:
              //     shareImg.attr('src','img/BTN_02.png');
              //     break;
              // case 3:
              //     shareImg.attr('src','img/BTN_03.png');
              //     break;
            }

        }




        $('#share').on('click',function(){
            GEvent('觀看完整預告');
            // shareFb();
            PV();

        });


        // function shareFb(){
        //     let myUrl = 'http://www.facebook.com/share.php?u=' + encodeURIComponent('https://www.youtube.com/watch?v=uhv_3CnOt8w');
        //     window.open(myUrl, 'window', 'width=550, height=450,personalbar=0,toolbar=0,scrollbars=1,resizable=1'); return false;
        // }

        function PV() {

            window.open('https://youtu.be/uhv_3CnOt8w')

        }

    });



    function GEvent(action) {

        console.log(action);
        gtag('event', 'event_name', {
            'event_label': action,
            'event_action': action
        });
    }

    </script>
</body>
</html>
